# Generated by Django 2.2.3 on 2019-09-03 11:42

from django.db import migrations, models


def reorder(apps, _):
    ReferenceDataset = apps.get_model('datasets', 'ReferenceDataset')
    for reference_dataset in ReferenceDataset.objects.all():
        for index, field in enumerate(reference_dataset.fields.all()):
            field.sort_order = index + 1
            field.save()


class Migration(migrations.Migration):

    dependencies = [
        ('datasets', '0012_auto_20190827_1553'),
    ]

    operations = [
        migrations.AlterModelOptions(
            name='referencedatasetfield',
            options={'ordering': ('sort_order',), 'verbose_name': 'Reference dataset field'},
        ),
        migrations.AddField(
            model_name='referencedatasetfield',
            name='sort_order',
            field=models.PositiveIntegerField(default=0),
        ),
        migrations.RunPython(reorder, reverse_code=migrations.RunPython.noop),
    ]
